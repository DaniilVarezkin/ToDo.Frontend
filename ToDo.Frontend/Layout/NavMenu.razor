@using Microsoft.AspNetCore.Components.Authorization
@inject AuthenticationStateProvider AuthStateProvider
@inject IAuthService AuthService
@inject NavigationManager Nav

<AuthorizeView>
    <Authorized>
        <MudButton Variant="Variant.Text" OnClick="Logout">Выйти</MudButton>
    </Authorized>
    <NotAuthorized>
        <MudButton Variant="Variant.Text" Href="/login">Войти</MudButton>
        <MudButton Variant="Variant.Text" Href="/register">Регистрация</MudButton>
    </NotAuthorized>
</AuthorizeView>

@code {
    private async Task Logout()
    {
        await AuthService.LogoutAsync();
        ((CustomAuthStateProvider)AuthStateProvider).NotifyTokenChanged(null);
        Nav.NavigateTo("/login", true);
    }
}